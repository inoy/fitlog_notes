# CLAUDE.md

このファイルは、FitlogNotes アプリを開発する上でのプロジェクトの目標とユーザーの要望をまとめたものです。

## 中核となる目標

Flutter を使い個人用の筋トレ記録 iOS アプリを開発する

## ユーザーの要望と制約

- **開発スタイル:** 一つ一つのステップごとに進め、各コード変更について明確な解説を行う。
- **プラットフォーム:** 主なターゲットは iOS とする。Cupertino デザインを適用する。
- **コミット方針:** one step ごとにコミットする。
- **ドキュメント方針:** Flutter 関連の技術的な詳細や学習内容は、`docs/` ディレクトリにまとめる。

## 開発方針

### UI/UX デザイン原則

iOS アプリとして最適なユーザー体験を提供するため、以下の原則を適用します：

1. **Cupertino デザインの徹底**
   - Material UI ではなく Cupertino ウィジェットを使用
   - iOS Human Interface Guidelines に準拠
   - `AppConstants` クラスでアイコンサイズ・色を統一管理

2. **タブバーナビゲーション**
   - `CupertinoTabScaffold` を使用した下部タブバー
   - 主要機能（ホーム・メニュー・統計・設定）を親指で操作可能な位置に配置
   - BlueSky スタイルの片手操作に最適化されたナビゲーション

3. **モバイルファーストのインタラクション**
   - 親指での操作を前提とした UI 配置
   - ハプティックフィードバックの活用
   - スクロール不要なコンパクトレイアウト

### ウィジェット分割のベストプラクティス

UI の複雑性を管理し、コードの可読性、再利用性、テスト容易性を向上させるため、以下の原則を適用します：

1. **単一責任の原則 (SRP) に基づく分割**

   - 一つのウィジェットは一つの明確な責任のみを持つ
   - `build`メソッドが複雑になったら新しいウィジェットとして切り出す

2. **UI とロジックの分離**

   - UI 描画に特化したウィジェット（`StatelessWidget`）と状態管理ウィジェット（`StatefulWidget`）を明確に区別
   - 可能な限り`StatelessWidget`を使用

3. **小さなウィジェットの作成**

   - 深いネストを避け、各ウィジェットの`build`メソッドを簡潔に保つ
   - コードの変更を特定のウィジェットに限定し、副作用のリスクを削減

4. **明確なインターフェース**
   - コンストラクタ引数（`final`フィールド）やコールバック関数（`ValueChanged`など）を通じた明確なインターフェース定義
   - 一方向データフロー：親 → 子へデータ、子 → 親へイベント通知

### コード変更時の説明方法

- **実装前**: 何を実装するか、なぜ必要かを明確に説明
- **実装中**: コードの意味、Flutter の概念、ベストプラクティスを解説
- **実装後**: 変更の影響、学習ポイント、次のステップを整理

### ステップバイステップ実装ガイド

#### ステップの粒度設定

- **1 ステップ = 1 つの明確な機能追加**: 例「日付選択機能の追加」
- **複雑な機能は複数ステップに分割**: 例「週間メニュー機能」→「モデル作成」→「UI 実装」→「データ連携」
- **各ステップで動作確認可能**: 途中でも意味のある状態を維持
